= ライブ データへのバインド

=== 目的
このトピックは、link:{FinancialChartLink}.{FinancialChartName}.html[{FinancialChartName}] コントロールにデータをバインドする方法を示します。各セクションの最後にサンプルの全コードを提供します。

=== このトピックの内容

このトピックは、以下のセクションで構成されます。

* <<Introduction,概要>> 
* <<SupportedChartTypes,サポートされるチャート タイプ>>

pick:[wpf="* <<Requirements,要件>>"]
* <<PreviewData,プレビュー>>
* <<OverviewData,概要>>
* <<StepsData,手順>>
* <<RelatedTopics,関連コンテンツ>>

[[Introduction]]
== 概要

以下の手順は、{FinancialChartName} コントロールをライブ データにバインドする方法を示します。
ifdef::wpf[]
{FinancialChartName} は、IEnumerable インターフェイスを実装する任意のオブジェクトにバインドすることができます。ICollection および IEnumerable を実装するネスト コレクションがサポートされます。
endif::wpf[]
ifdef::jquery[]
{FinancialChartName} は JavaScript 配列にバインドできます。ネスト コレクションもサポートされます。
endif::jquery[]

[[SupportedChartTypes]]
== サポートされるチャート タイプ

link:{FinancialChartLink}.{FinancialChartName}{ApiProp}chartType{HtmlApiExtension}[ChartType] プロパティは、表示するシリーズ タイプを選択できます。

サポートされるシリーズ タイプ:

* 棒
* ローソク足
* 柱状
* 折れ線

ifdef::wpf[]
[[Requirements]]
== 要件

以下は、{FinancialChartName} コントロールを追加するための一般要件です。

以下の NuGet パッケージ参照をアプリケーションに追加します。

** Infragistics.WPF.FinancialChart

NuGet フィードのセットアップと NuGet パッケージの追加の詳細については、link:nuget-feeds.html[NuGet フィード] ドキュメントを参照してください。

endif::wpf[]

ifdef::wpf[]
*XAML の場合:*
[source,xaml]
----
xmlns:ig="http://schemas.infragistics.com/xaml"
----  

*C# の場合:* 
[source,csharp]
----
using {FinancialChartNamespace};  
----  

*VB の場合:* 
[source,vb]
----
Imports {FinancialChartNamespace}
---- 
endif::wpf[]

[[PreviewData]]

== プレビュー

サンプル データにバインドした {FinancialChartName} コントロール:

pick:[wpf="image::images/financialchart_wpf_livedata.png[]"]
pick:[jquery="image::images/financialchart_jquery_livedata.png[]"]

[[OverviewData]]

== 概要

1.	データ モデルの定義
2.	{FinancialChartName} コントロールのインスタンスの追加
3.	(オプション) 結果の検証

[[StepsData]]

== 手順

*データの定義*

ifdef::wpf[]
データをモデル化するためのクラスを作成します。

ItemsSource が INotifyCollectionChanged を実装する場合、チャートは CollectionChanged イベントに応答します。

ItemsSource のオブジェクトが INotifyPropertyChanged を実装場合、チャートは PropertyChanged イベントに応答します。

*C# の場合:*
[source, csharp]
----
public class Price : ObservableModel
{
    private DateTime _time;
    private double _open;
    private double _high;
    private double _low;
    private double _close;
    private double _volume;

    public DateTime Time
    {
        get { return _time; }
        set
        {
            if (_time != value)
            {
                _time = value;
                OnPropertyChanged();
            }
        }
    }
    public double Open
    {
        get { return _open; }
        set
        {
            if (_open != value)
            {
                _open = value;
                OnPropertyChanged();
            }
        }
    }
    public double High
    {
        get { return _high; }
        set
        {
            if (_high != value)
            {
                _high = value;
                OnPropertyChanged();
            }
        }
    }
    public double Low
    {
        get { return _low; }
        set
        {
            if (_low != value)
            {
                _low = value;
                OnPropertyChanged();
            }
        }
    }
    public double Close
    {
        get { return _close; }
        set
        {
            if (_close != value)
            {
                _close = value;
                OnPropertyChanged();
            }
        }
    }
    public double Volume
    {
        get { return _volume; }
        set
        {
            if (_volume != value)
            {
                _volume = value;
                OnPropertyChanged();
            }
        }
    }
    
    public string Label { get { return this.Time.ToShortDateString(); } }
}

public class ObservableModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
----


*Visual Basic の場合:*
[source, vb]
----
Public Class Price
    Inherits ObservableModel
    
    Private _time As DateTime
    Private _open As Double
    Private _high As Double
    Private _low As Double
    Private _close As Double
    Private _volume As Double
    
    Public Property Time As DateTime
        Get
            Return Me._time
        End Get
        Set
            If (Me._time <> value) Then
                Me._time = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public Property Open As Double
        Get
            Return Me._open
        End Get
        Set
            If (Me._open <> value) Then
                Me._open = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public Property High As Double
        Get
            Return Me._high
        End Get
        Set
            If (Me._high <> value) Then
                Me._high = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public Property Low As Double
        Get
            Return Me._low
        End Get
        Set
            If (Me._low <> value) Then
                Me._low = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public Property Close As Double
        Get
            Return Me._close
        End Get
        Set
            If (Me._close <> value) Then
                Me._close = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public Property Volume As Double
        Get
            Return Me._volume
        End Get
        Set
            If (Me._volume <> value) Then
                Me._volume = value
                OnPropertyChanged
            End If
        End Set
    End Property
    
    Public ReadOnly Property Label As String
        Get
            Return Me.Time.ToShortDateString
        End Get
    End Property
End Class

Public Class ObservableModel
    Implements INotifyPropertyChanged
    
    Public Event PropertyChanged As PropertyChangedEventHandler
    
    Public Sub OnPropertyChanged(Optional ByVal propertyName As String = "")
        If (Not (PropertyChanged) Is Nothing) Then
            PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
        End If
        
    End Sub
End Class
----
endif::wpf[]

ifdef::jquery[]
*JavaScript の場合:*
[source,js]
----
function getData() {
    var data = PriceData.AMZN();
	return data;
}
----
endif::jquery[]

*{FinancialChartName} コントロールのインスタンスの追加*

{FinancialChartName} インスタンスを追加し、データにバインドします。

ifdef::wpf[]
*XAML の場合*:
[source, xaml]
----
<Window.DataContext>
    <local:Data />
</Window.DataContext>
<Grid>
    <ig:{FinancialChartName} ItemsSource="{Binding}" />
</Grid>
----
endif::wpf[]

ifdef::jquery[]
*HTML の場合:*
[source,html]
----
<div id="chart" style="width:800px;height:600px"></div>
----
*JavaScript の場合:*
[source,js]
----
$(function () {
    var data = getData();		
    $("#chart").igFinancialChart({ 
    	dataSource: data
    });
});
----
endif::jquery[]

最後に、サービスから取得される新しいデータとデータ ソースを更新します。

ifdef::jquery[]
データ ソースを更新した後、以下の関数を呼び出すと、チャートに通知します。

* link:{FinancialChartLink}.{FinancialChartName}#methods:notifyClearItems{HtmlApiExtension}[notifyClearItems]
* link:{FinancialChartLink}.{FinancialChartName}#methods:notifyInsertItem{HtmlApiExtension}[notifyInsertItem]
* link:{FinancialChartLink}.{FinancialChartName}#methods:notifyRemoveItem{HtmlApiExtension}[notifyRemoveItem]
* link:{FinancialChartLink}.{FinancialChartName}#methods:notifySetItem{HtmlApiExtension}[notifySetItem]

endif::jquery[]

*結果の確認 (オプション)*

結果を検証するために、アプリケーションを実行します。{FinancialChartName} コントロールのデータ コレクションへのバインドが成功すれば、結果のチャートは上記のようになります。

[[RelatedTopics]]
== 関連コンテンツ

=== トピック

このトピックの追加情報については、以下のトピックも合わせてご参照ください。

[options="header", cols="a,a"]
|====
|トピック|目的

| link:financial-chart-binding-to-data.html[データ バインド]
|このトピックでは、{FinancialChartName} コントロールをデータにバインドする概要を提供します。

| link:financial-chart-binding-to-single-data.html[データの単一のセットにバインド]
|このトピックは、{FinancialChartName} コントロールを単一のデータ セットにバインドする方法を紹介します。

|link:financial-chart-binding-to-multiple-data.html[データの複数のセットにバインド]
|このトピックは、{FinancialChartName} コントロールを複数のデータ セットにバインドする方法を紹介します。

|====